# 分组查询

在实际应用中，可能会有这样的需求，需要先进行分组，然后对每一组的数据进行操作。这个时候我们需要分组查询

```mysql
select
	...
from
	...
group by
	...
```

组合之前的关键字，查看一下执行顺序

```mysql
select
	...
from
	...
where
	...
group by
	...
order by
	...
```

执行的顺序是：

1. `from`
2. `where`
3. `group by`
4. `select`
5. `order by`

为什么分组函数不能直接使用在`where`后面

```mysql
// 报错
select ename, sal from emp where sal > min(sal);
```

> 因为分组函数在使用的时候必须先分组之后才能使用，`where`执行的时候，还没有分组。所以`where`后面不能出现分组函数

找出每个工作岗位的工资和

​	实现思路是：按照工作岗位分组，然后对工资求和

```mysql
mysql> select job, sum(sal) from emp group by job;
+-----------+----------+
| job       | sum(sal) |
+-----------+----------+
| CLERK     |  4150.00 |
| SALESMAN  |  5600.00 |
| MANAGER   |  8275.00 |
| ANALYST   |  6000.00 |
| PRESIDENT |  5000.00 |
+-----------+----------+
5 rows in set (0.00 sec)
```

> 以上语句的执行顺序：
>
> * 先从`emp`表中查询数据
> * 根据`job`字段进行分组
> * 然后对每一组的数据进行`sum(sal)`

